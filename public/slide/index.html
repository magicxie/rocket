<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>H5</title>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="qr-btn"><img src="/images/qr.png"></div>
	<div id="impress">
        <div id="first" class="step" data-x="0" data-y="1000" data-rotate-x="90" data-scale="5" style="margin-top: -10%;">
            <img src="css/images/h5.png" class="h5logo" alt="">
            <div class="firstpage-title">
                <q>站在HTML5的风口</q>
            </div>
        </div>
	    <div class="step slide">
			<header>HTML5吹的什么风</header>
			<section>
  
				<ul class="trend" id="timeline">
					<li>云端--清风</li>
                    <li>通道--疾风</li>
                    <li>终端--旋风</li>
				</ul>
			</section>
	    </div>
	    <div class="step slide">
			<header>云端</header>
			<q><mark>语义化</mark>、<mark>表单元素</mark>增强和<mark>响应式布局</mark>给沉重的网页带来一缕清风</q>
	    </div>
		<div class="step slide">
			<h2>语义化</h2> 
			<img style="width:100%;" src="css/images/sematic.png"/>
		</div>
		<div class="step slide">
			<h2>新控件和表单验证</h2>
			<section class="code">
				<div><label>必填项</label><input type="text" required=""></div>
				<div><label>邮箱</label><input type="email" value="some@email.com"></div>
				<div><label>日期</label><input type="date" min="2010-08-14" max="2011-08-14" value="2010-08-14"></div>
				<div><label>滑动条</label><input type="range" min="0" max="50" value="10"></div>
				<div><label>搜索框</label><input results="10" type="search" placeholder="Search..."></div>
				<div><label>电话</label><input type="tel" placeholder="(555) 555-5555" pattern="^\(?\d{3}\)?[-\s]\d{3}[-\s]\d{4}.*?$"></div>
				<div><label>拾色器</label><input type="color" placeholder="e.g. #bbbbbb"></div>
				<div><label>数字</label><input type="number" step="1" min="-5" max="10" value="0"></div>
			</section>
		</div>
		<div class="step slide">
			<h2>响应式布局</h2>
			<iframe style="display:block;margin:auto;width:100%;transition: width 1s;" id="photowallFrame" src="http://isux.tencent.com/responsive-web-design.html" class="demo-frame" frameborder="0" ></iframe>
			<p style="display: inline-block;min-width: 20%;width: 100%;">适配多种设备只需一套css，无需另建移动版网站</p>
		</div>
		<!--
		<div class="step slide">
			<h2>响应式布局(Demo photowall)</h2>
			<h3>适配多种屏幕的噩梦</h3>
			<table class="tb-list feijitable">
				<tbody><tr>
					<td width="100"></td>
					<td>以往做法</td>
					<td width="45%">响应式布局</td>
				</tr>
				<tr>
					<th>宽屏LCD</th>
					<td>页面适配1920 x 1080</td>
					<td rowspan="6" style="vertical-align: middle;color: #589D41;font-size: 1.6em;line-height: 2em;font-weight: bold;">使用@media query技术<br/>一套CSS<br/>适配所有屏幕</td>
				</tr>
				<tr>
					<th>iphone5</th>
					<td>页面适配1136 x 640视网膜屏幕</td>
				</tr>
				<tr>
					<th>iphone6</th>
					<td>页面适配1334 x 7500视网膜屏幕</td>
				</tr>
				<tr>
					<th>iphone6+</th>
					<td>页面适配1920 x 1080视网膜屏幕</td>
				</tr>
				<tr>
					<th>三星S6 Edge</th>
					<td>页面适配2560x1440 Quad HD屏幕</td>
				</tr>
				<tr>
					<th>更先进的手机</th>
					<td>无尽的页面适配</td>
				</tr>
				</tbody></table>
		</div>
		-->
		<div class="step slide">
			<header>通道</header>
			<q><mark>WebSocket</mark>，<mark>存储API</mark>和<mark>文件API</mark>使网页可以实时通信，离线缓存和处理文件，网页的通信能力如疾风般大幅提升</q>
		</div>
		<div class="step slide">
			<header>使用存储和文件API的Demo photowall</header>
			<iframe style="width:100%;" class="demo-frame" frameborder="0" src="http://cloud.eggcanfly.net:3002/user"></iframe>
		</div>
		<div class="step slide">
			<h2>存储API</h2>
			<p>传统Http缓存兼容性高，但在移动端显疲态</p>
			<ul style="margin:1em;" class="trend">
				<li>发送额外Http请求，费资源</li>
				<li>离线即报废</li>
				<li>缓存数据到cookie力不从心</li>
			</ul>
		</div>
		<div class="step slide">
			<p>HTML5的离线存储和本地存储应运而生</p>
			<ul style="margin:1em;" class="trend">
				<li><mark>本地存储</mark>大容量版cookie，存取不需要发送Http请求</li>
				<li><mark>离线存储</mark>适合离线场景应用，如内嵌客户端</li>
			</ul>
			
			<p class="z-a">本地存储配合Http缓存，已广泛应用到<b>勋章墙</b>和<b>活动页面</b>，勋章墙的缓存命中率在10-15%左右。</p>
			<!--<p class="z-a">photowall使用了http缓存 + 本地存储</p>-->
		</div>

		<div class="step slide">
			<h2>photowall - 上传的困境</h2>
			<progress max=100 value=60></progress>
			<p class="cc-desc">照片大？<p>
			<p class="cc-desc">弱网络？</p>
			<p class="cc-desc">频繁断线？</p>
		</div>
		<div class="step slide">
			<h2>photowall - 使用FileAPI和Canvas先压缩再上传,进度条再见</h2>
			<div style="border-bottom: 1px gray solid">
				<div class="compress before">压缩前<br/>-。-|||</div>
				<div class="compress after">压缩后:-)</div>
			</div>
			<p class="cc-desc">2-3M的照片可以压缩到<b>150K</b>以下（适合移动网络下数据传输）</p>
			<p class="cc-desc">可断点续传和秒传</p>
		</div>
		<div class="step slide chat chat-1">
			<h2>WebSocket</h2>
			<iframe src="http://chat.tangchanglin.com/chat.php" width="350" height="550" ></iframe>
			<div class="content-right">
				<h3 >聊天室，基于WebSocket进行实时通信的经典应用场景</h3>
				<p >目前已经实现以下功能：</p>
				<ul>
					<li>文字消息</li>
					<li>表情符号</li>
					<li>语音消息</li>
					<li>图片消息</li>
					<li>地理位置</li>
					<li>浏览器全屏</li>
					<li>.........</li>
				</ul>
				<p class="dd">最佳体验环境：Android + Firefox(或Chrome)</p>
				<p >
					<a href="javascript:;" ref="css/images/chat-qr-firefox.png" target="_blank"><img alt="" src="css/images/chat-qr-firefox.png" ></a>
					<a href="javascript:;" ref="css/images/chat-qr-chrome.png" target="_blank"><img alt="" src="css/images/chat-qr-chrome.png" ></a>
					<a href="javascript:;" ref="css/images/chat-qr-room.png" target="_blank"><img alt="" src="css/images/chat-qr-room.png" ></a>
					<br/>http://chat.tangchanglin.com/chat.php
				</p>
			</div>
			<div id="qr-layer" >

			</div>
			<div id="qr-wrap" ><img alt="" src="css/images/chat-qr-firefox.png" ></div>
		</div>
		<div class="step slide chat chat-2">
			<h2>WebSocket应用场景</h2>
			<div class="content">
				<p >WebSokcet可以干什么？</p>
				<ul >
					<li>
						多媒体聊天：聊天室、在线客服
						<p><img alt="" src="css/images/chat-screen-voice.png" ><img alt="" src="css/images/tom-chat2-01.png" /></p>
					</li>
					<li>
						在线游戏：双人打飞机、棋牌类游戏
						<p><img alt="" src="css/images/tom-chat2-02.png" /></p>
					</li>
					<li>
						数据实时监控：反观光全景视图、股票基金 
						<p><img alt="" src="css/images/tom-chat2-03.png" /></p>
					</li>
					<li>
						多屏互动：活动推广（<a href="http://zt.qq.com/act/hdz/index.htm" target="_blank">《斗战诛天》）</a>
						<p><img alt="" src="css/images/tom-chat2-04.png" /></p>
					</li>
					
				</ul>
				<p class="imgList"><img alt="" src="css/images/chat-screen-voice.png" ><img alt="" src="css/images/tom-chat2-02.png" /><img alt="" src="css/images/tom-chat2-03.png" /></p>
			</div>
		</div>
		<div class="step slide chat chat-3">
			<h2>WebSocket优势和缺点？</h2>
			<div class="content">
			<table class="tb-list">
				<tr>
					<td width="70"></td>
					<th width="160">轮询</th>
					<th width="160">长连接</th>
					<th width="160">Flash</th>
					<th>WebSocket</th>
				</tr>
				<tr>
					<th>优点：</th>
					<td>
						1.简单<br/>
					</td>
					<td>
						1.无效请求较少<br/>
						2.相对实时
					</td>
					<td>
						1.实时<br/>
						2.Push能力<br/>
						3.浏览器普遍支持
					</td>
					<td>
						1.轻量<img id="chat-3-chart" alt="" src="css/images/tom-chat3-01.jpg" ><br/>
						2.实时<br/>
						3.Push能力<br/>
						4.无依赖<br/>
						5.移动端普遍支持
					</td>
				</tr>
				<tr>
					<th>缺点：</th>
					<td>
						1.冗余数据多<br/>
						2.无效请求多<br/>
						3.服务器开销大<br/>
						4.不实时<br/>
						5.无法主动推送
					</td>
					<td>
						1.服务器开销大<br/>
						2.适于单向接收数据
					</td>
					<td>
						1.依赖插件<br/>
						2.移动端支持较差
					</td>
					<td>
						1.浏览器支持不完整<br/>
						2.服务端需升级
					</td>
				</tr>
				<tr>
					<th>结论：</th>
					<td>实时性不高，用户不多</td>
					<td>实时性高，用户较少，数据交互少</td>
					<td>桌面实时应用</td>
					<td>实时性高，大用户量，桌面与移动</td>
				</tr>
			</table>
			</div>
			<div id="qr-layer" >

			</div>
			<div id="qr-wrap" ><img alt="" src="" ></div>
		</div>
		<!--
		<div class="step slide">
                <h2><a id="reloadRocketFrame" style="cursor: pointer">年会小火箭</a>-<span class="font-green">CSS3动画+自定义字体</span></h2>
	
            <iframe style="width: 100%;height: 85%;" id="rocketFrame" src="http://cloud.eggcanfly.net:3000/counter.html"></iframe>
	    </div>
	    -->
	    <div class="step slide">
			<header>终端</header>
			<q><mark>WebGL</mark>、<mark>Canvas画布</mark>、<mark>@Font-face</mark>、<mark>地理定位</mark>和<mark>传感器</mark>等新技术刮起的旋风代表未来网页的方向</q>
	    </div>
	    <div class="step slide">
			<div style="z-index: 10;position: absolute;margin: 1em;left: 0;background: rgba(0, 0, 0, 0.72);padding: 1em;">
				<p>业界已有基于WebGL的3D引擎:Cocos-2d-js, three.js,开发门槛降低</p>
				<p>不借助插件即可实现复杂的3D效果</p>
				<p>跨平台：IOS8 safari，Android，Chrome等支持</p>
				<br/>
				<q>典型场景：数据可视化，街景地图</q>
				<q style="font-size: 1em;text-align: center;">基于WebGL实现的3D图表不仅表现力已大大增强,还拥有跨平台特性</q>		
  			</div>		
			<iframe  style="position: absolute;width: 100%;height: 100%;left:0;top:0;" id="chartFrame" src="/echartx/example/map3d_population3.html"></iframe>
		</div>
	    <div class="step slide">
	    	<h2>想100%还原设计稿中的文字？</h2>
			<section>
				<img src="css/images/cool.png" class="animated zoomIn infinite" style="width: 100%;">

				<p>吃字体的亏，上wording的当，最后死在切图上。<p>
			</section>  
			
		</div>
		<div class="step slide">

			<h2>@font-face技术助力还原字体</h2>
			<section ><input class="font-demo font-1" value="cool" id='font-cool'></input></section>  
			<div style="position:fixed;bottom:1em;">
				<q style="font-size: 1em;text-align: center;">自从有了@font-face，刘爷腰不酸了腿也不疼了</q>
				<input id="fontColor" type="color"/> 
				<a class="changeFont font-1">换字体</a>			
				<a class="changeFontClass font-bold" data-class="font-bold">加粗</a>		
				<a class="changeFontClass font-capitalize" data-class="font-capitalize">首字大写</a>
				<input value="12" min="1" max="12" type="range" class="changeFontSize"/>		
			</div>					
		</div>
		<div class="step slide">
			<h2>Canvas画布 - 打飞机双人版</h2>
			<iframe src="http://philgong.kf0309.3g.qq.com/g/imgclean/dafeiji/index.jsp" class="demo-frame" frameborder="0" scrolling="no"></iframe>
			<div style="float:right;width: 55%;">
				<div class="fs22">两个物体之间碰撞检测</div>
				<table class="tb-list feijitable">
					<tbody><tr>
						<td width="70"></td>
						<td>不规则图形</td>
						<td>浏览器支持情况</td>
					</tr>
					<tr>
						<th>canvas</th>
						<td>支持</td>
						<td><span class="tableSpan">pc：ie678以外的浏览器都支持<br />手机：基本都支持</span></td>
					</tr>
					<tr>
						<th>div</th>
						<td>只支持矩形</td>
						<td>所有浏览器均支持</td>
					</tr>
					</tbody></table>

				<img class="gzhewm" style="display: block;width: 100%;" src="css/images/pengzhuang.png" />　　
			</div>
		</div>
		<div class="step slide">
			<header>地理定位</header>
			<img src="css/images/taxi.png" style="width:40%;display: inline-flex;margin-right: 10%;" alt="" class="">
			<iframe src="http://map.qq.com/m/index/map" style="width:40%;display: inline-flex;height:100%;" ></iframe>
			
		</div>
		<!--
		<div class="step slide">
			<h2>刮刮卡<span class="font-green">画布 + 图像处理</span></h2>
			<iframe src="http://www.liveapp.cn/auto/index/39049?channel=1&weixin.qq.com=#wechat_webview_type=1" class="demo-frame" frameborder="0" scrolling="no"></iframe>
			<div style="float:right;width: 50%;">检测用户手指触摸屏幕图像位置的像素透明度设成0<br /><br /><br />
				<div class="binbintitle">支持情况：几乎全部手机都支持</div>
				<div class="binbintitle">这个案例的开发时间：1天</div></div>
		</div>
		-->
		<div class="step slide zhongli">
			<h2>传感器 - <span class="font-green">年会摇一摇拜年</span></h2>
			<iframe src="http://hd.3g.qq.com/g/bainian/index.html" class="demo-frame" frameborder="0" scrolling="no"></iframe>
			<div style="float:right;width: 50%;">利用HTML5的传感器API DeviceOrientation事件得到运动和方向传感器数据，实现摇一摇动作的检测<br /><br /><br />
				<div class="binbintitle">应用场景：手机浏览器</div>
				<div class="binbintitle">支持情况：主流的手机都支持</div>
				<div class="binbintitle">HTML5尚未定稿的部分还包括支持其他传感器（温度、气压、湿度、光线、声音、距离）</div></div>
		</div>
		<div class="step slide" id="dp">
			<h2>大众点评网【年味地图】：结合大数据的实时推广</h2>
			<img src="css/images/nianweiditu-image.png" alt="">
		</div>
		<div class="step slide" id="levis">
			<h2>有个好故事，用H5快速讲给大家听</h2>
			<img src="css/images/levis-image.png" alt="" style="height: 100%;">
		</div>
        <div class="step slide">
            <h2>HTML5带来网页的进化，催生网页+原生的混合应用</h2>
            <q>跨平台，降低适配成本</q>
            <q>云端发布，降低发布成本</q>
            <q>桥接原生API，快速生产原型</q>
        </div>
		<div class="step slide sdk">
			<h2>原生 + JavaScript = JS SDK</h2>
			<img class="wechatBg" src="css/images/wechat.png" />
			<div class="js-primary">
				<h3>分享接口</h3>
				<h3><a href="#image" class="a-sdk">图像接口</a></h3>
				<h3><a href="#audio" class="a-sdk">音频接口</a></h3>
				<h3>界面操作</h3>
				<h3>地理位置</h3>
				<h3>设备信息</h3>
			</div>
			<div class="js-secondary">
				<h3>智能接口</h3>
				<h3>微信支付</h3>
				<h3>微信扫一扫</h3>
				<h3>微信小店</h3>
				<h3>微信卡券</h3>
			</div>
		</div>
		<div class="step slide" id="image">
			<h2>图像接口 - <span class="font-green">紧跟热点，利用话题</span></h2>
			<img src="css/images/image-sdk-1.PNG" alt="">
			<img src="css/images/image-sdk-2.PNG" alt="">
			<img src="css/images/image-sdk-3.PNG" alt="" class="i-s-3">
			<img src="css/images/image-sdk-4.PNG" alt="" class="i-s-4">
		</div>
		<div class="step slide" id="audio">
			<h2>音频接口 - <span class="font-green">可口可乐的语音祝福</span></h2>
			<img src="css/images/audio-sdk.png" alt="">
		</div>
	</div>
    <footer style="position: fixed; bottom: 10px; left: 10px; pointer-events: auto;">
           站在HTML5的风口
    </footer>
	<script src="js/jquery.js"></script>
	<script src="js/impress.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/js/index.js"></script>
	<script>
		var page = $('#impress').children('.slide');
		var firstX = -1000;
		page.each(function(i,n){
			$(n).attr({
				'data-x': firstX + i * 1100,
				'data-y': '-1500'
			});;
		})
		impress().init();

		function resizePhotowallFrame(){
			var ini = 0;
			return function(){
console.log(ini)
				var width = $('#photowallFrame').css('width');
				if(ini % 3 == 0){
					width = '100%';
				}else if(ini % 3 == 1){
					width = '70%';
				}else{
					width = '40%';
				}
				$('#photowallFrame').css('width', width);
				ini++;

			};
			
		}

		setInterval(resizePhotowallFrame(), 4000);

		$('#reloadRocketFrame').click(function(){
			$('#rocketFrame').attr('src', $('#rocketFrame').attr('src'));
		});

		function changeFontColor(){
			$('#font-cool').css('color', this.value);
		}

		function changeFontClass(fontClass){
			$('#font-cool').addClass(fontClass);
		}

		function changeFont(){
			
			$('#font-cool').toggleClass('font-1').toggleClass('font-2');	
			
		}

		function changeFontSize(){
			$('#font-cool').css('font-size', this.value + 'em');
		}

		$('.changeFontSize').change(changeFontSize);

		$('.changeFontClass').click(function(){
			changeFontClass($(this).data('class'));
		});

		$('.changeFont').click(changeFont);

		$('#fontColor').change(changeFontColor);

		$('.chart').click(function(){
			$('#chartFrame').attr('src', $(this).data('href'));
		});

		$('.chat-1 .content-right a').click(function(){
			$('.chat-1 #qr-wrap img').attr('src',$(this).attr("ref"));
			$('.chat-1 #qr-wrap').fadeIn();
			$('.chat-1 #qr-layer').fadeIn();
		})
		$('.chat-1 #qr-layer').click(function(){
			$('.chat-1 #qr-wrap').fadeOut();
			$(this).fadeOut();
		});
		
		$('.chat-2 li').click(function(){
			if($(this).find("p").is(":visible")){
				$(this).find("p").hide();
				$('.chat-2 li').fadeIn();
				$('.chat-2 .imgList').show();
			}else{
				$('.chat-2 li').hide();
				$('.chat-2 .imgList').hide();
				$(this).fadeIn();
				$(this).find("p").fadeIn();
			}
			
		});
		
		$("#chat-3-chart").click(function(){
			$('.chat-3 #qr-wrap img').attr('src',$(this).attr("src"));
			$('.chat-3 #qr-wrap').fadeIn();
			$('.chat-3 #qr-layer').fadeIn();
		})
		$('.chat-3 #qr-layer').click(function(){
			$('.chat-3 #qr-wrap').fadeOut();
			$(this).fadeOut();
		});

		var hashQrPage = {
			'8': '/images/qr.png',
			'9999' : 	'css/images/rocket.png',
			'22':'css/images/nianhui.png',
			'20' : 'css/images/feiji.png',
			'9998' : 'css/images/guagua.png',
			'13' : 'css/images/chat-qr-room.png',
            '24' : 'css/images/sdk.png',
			'dp':'css/images/nianweiditu.png',
			'levis':'css/images/levis.png',
			'image':'css/images/cos-image.png',
			'audio':'css/images/audio-kele.png'

		};


		function getHashTag(){
			return (location.hash.search('-') > 0) ? location.hash.split('-')[1] : location.hash.replace('#/','');
		}

		var btn = $('.qr-btn');
		$(window).on('hashchange',function(e){
			var page = getHashTag();
			if(hashQrPage[page]){
				btn.find('img').attr('src',hashQrPage[page]);
				btn.fadeIn();
			}else{
				if(btn.is('.open-qr')){
					hideQr();
				}
				btn.fadeOut();
			}
		});

		btn.on('click',function(){
			if(btn.is('.open-qr')){
				hideQr();
			}else{
				showQr();
			}
		});

		function showQr(){
			var page = getHashTag();
			var w = $(window),
					ww = w.width(),
					wh = w.height(),
					bw = 520,
					bh = 520;
			if(hashQrPage[page]){
				btn.addClass('open-qr');
				btn.css({
					left: (ww - bw) / 2,
					top: (wh - bh) / 2
				});
			}
		}

		function hideQr(){
			btn.removeClass('open-qr').removeAttr('style').css({
				display: 'block'
			});
		}	

		var socket = io();
		//events
		socket.on('showQr',function(data){
			showQr();
		});

		socket.on('hideQr',function(data){
			hideQr();
		});

		socket.on('slide control',function(data){

			impress()[data.cmd].call()
			
		});

		//image-sdk
		$('#image').on('click',function(){
			$('.i-s-3').addClass('i-s-3-a');
		});
		$('.i-s-3').on('click',function(){

			$('.i-s-4').css('z-index',10001);
			setTimeout(function(){
				$('.i-s-4').addClass('i-s-4-a');
			},400);

		})
	</script>
</body>
</html>