<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>H5</title>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
	<div class="qr-btn"><img src="/images/qr.png"></div>
	<div id="impress">
		<div id="first" class="step slide">
	        <img src="css/images/h5.jpg" alt="">
	        <q>深入浅出H5</q>
	    </div>
	    <div class="step slide">
			<header>Web技术发展历程</header>
			<section>
				<ul id="timeline">
					<li data-auto=""><span class="year">1991</span> <span class="html">HTML</span></li>
					<li data-auto=""><span class="year">1994</span> <span class="html">HTML 2</span></li>
					<li data-auto=""><span class="year">1996</span> <span class="css">CSS 1</span> + <span class="js">JavaScript</span></li>
					<li data-auto=""><span class="year">1997</span> <span class="html">HTML 4</span></li>
					<li data-auto=""><span class="year">1998</span> <span class="css">CSS 2</span></li>
					<li data-auto=""><span class="year">2000</span> <span class="html">XHTML 1</span></li>
					<li><span class="year"><em class="stroke">2002</em></span> <span class="css">Tableless Web Design</span></li>
					<li><span class="year"><em class="stroke">2005</em></span> <span class="js">AJAX</span></li>
					<li><span class="year"><em class="stroke">2009</em></span> <span class="html">HTML 5</span></li>
				</ul>
			</section>
	    </div>
		<div class="step slide">
			<h2>语义化</h2>
			<img src="css/images/sematic.png"/>
			<ul style="float: right">
				<li>SEO优化</li>
				<li>无障碍阅读</li>
				<li>开发效率</li>
			</ul>
		</div>
		<div class="step slide">
			<h2>表单验证和新输入框类型</h2>
			<section class="code">
				<pre class="form-inputs prettyprint"><input type="text" required=""><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"text"</span><span class="pln"> </span><b><span class="atn">required</span></b><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input type="email" value="some@email.com"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">email</span></b><span class="atv">"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"some@email.com"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input type="date" min="2010-08-14" max="2011-08-14" value="2010-08-14"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">date</span></b><span class="atv">"</span><span class="pln"> </span><b><span class="atn">min</span></b><span class="pun">=</span><span class="atv">"2010-08-14"</span><span class="pln"> </span><b><span class="atn">max</span></b><span class="pun">=</span><span class="atv">"2011-08-14"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"2010-08-14"</span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input type="range" min="0" max="50" value="10"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">range</span></b><span class="atv">"</span><span class="pln"> </span><b><span class="atn">min</span></b><span class="pun">=</span><span class="atv">"0"</span><span class="pln"> </span><b><span class="atn">max</span></b><span class="pun">=</span><span class="atv">"50"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"10"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input results="10" type="search" placeholder="Search..."><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">search</span></b><span class="atv">"</span><span class="pln"> </span><b><span class="atn">results</span></b><span class="pun">=</span><span class="atv">"10"</span><span class="pln"> </span><b><span class="atn">placeholder</span></b><span class="pun">=</span><span class="atv">"Search..."</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input type="tel" placeholder="(555) 555-5555" pattern="^\(?\d{3}\)?[-\s]\d{3}[-\s]\d{4}.*?$"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">tel</span></b><span class="atv">"</span><span class="pln"> &nbsp;</span><b><span class="atn">placeholder</span></b><span class="pun">=</span><span class="atv">"(555) 555-5555"</span><span class="pln"><br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><b><span class="atn">pattern</span></b><span class="pun">=</span><span class="atv">"^\(?\d{3}\)?[-\s]\d{3}[-\s]\d{4}.*?$"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input type="color" placeholder="e.g. #bbbbbb"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">color</span></b><span class="atv">"</span><span class="pln"> </span><b><span class="atn">placeholder</span></b><span class="pun">=</span><span class="atv">"e.g. #bbbbbb"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br><br></span><input type="number" step="1" min="-5" max="10" value="0"><span class="tag">&lt;input</span><span class="pln"> </span><span class="atn">type</span><span class="pun">=</span><span class="atv">"</span><b><span class="atv">number</span></b><span class="atv">"</span><span class="pln"> </span><b><span class="atn">step</span></b><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><b><span class="atn">min</span></b><span class="pun">=</span><span class="atv">"-5"</span><span class="pln"> </span><b><span class="atn">max</span></b><span class="pun">=</span><span class="atv">"10"</span><span class="pln"> </span><span class="atn">value</span><span class="pun">=</span><span class="atv">"0"</span><span class="pln"> </span><span class="tag">/&gt;</span><span class="pln"><br></span><div style="height:0px; clear:both;"><span class="pln"><br></span></div></pre>
			</section>
		</div>
		<div class="step slide">
			<h2>photowall</h2>
			<h3><strike>离线存储</strike> or 本地存储</h3>
			<h3>图片处理</h3>
			<h3>实时通信</h3>
			<h3>响应式布局</h3>
		</div>
		<div class="step slide">
			<h2>photowall - 资源本地存储</h2>
			<table class="tb-list">
				<tr>
					<td width="70"></td>
					<th>http缓存</th>
					<th>离线存储(manifest)</th>
					<th>本地存储(localStorage)</th>
				</tr>
				<tr>
					<th>优点：</th>
					<td>兼容性好；实现优雅，仅需服务端设置相应的http头</td>
					<td>实现简单，有一个单独文件管理需缓存的文件</td>
					<td>移动端几乎都支持，（读取缓存速度比http缓存更快）</td>
				</tr>
				<tr>
					<th>缺点：</th>
					<td>依赖浏览器策略，刷新会发送304请求</td>
					<td>会缓存动态页面</td>
					<td>额外增加点代码，不能直接缓存图片</td>
				</tr>
				<tr>
					<th>结论：</th>
					<td>适合pc端场景</td>
					<td>离线也能打开，适合内嵌到客户端</td>
					<td>适合移动端的页面</td>
				</tr>
			</table>
			<p class="z-a">注：本地存储已广泛应用到<b>勋章墙</b>和<b>活动页面</b>，勋章墙的缓存命中率在10-15%左右。</p>
			<p class="z-a">photowall使用了http缓存 + 本地存储</p>
		</div>

		<div class="step slide">
			<h2>photowall - 照片处理</h2>
			<h2>上传的困境</h2>
			<img src="css/images/prograss.png" style="width: 80%;margin: 0 10%;"/>
			<p class="cc-desc">照片太大或网络质量差<p>
			<p class="cc-desc">导致上传失败率高和上传速度低</p>
		</div>
		<div class="step slide">
			<h2>photowall - 照片处理</h2>
			<h2>使用FileAPI和Canvas先压缩再上传,进度条再见</h2>
			<div style="border-bottom: 1px gray solid">
				<div class="compress before">压缩前</div>
				<div class="compress after">压缩后</div>
			</div>
			<p class="cc-desc">2-3M的照片可以压缩到<b>150K</b>以下（适合移动网络下数据传输）</p>
			<p class="cc-desc">可断点续传和秒传</p>
		</div>
		<div class="step slide">
			<h2>photowall - 响应式布局(@media query)</h2>
			<h3>适配多种屏幕的噩梦</h3>
			<table class="tb-list feijitable">
				<tbody><tr>
					<td width="100"></td>
					<td>以往做法</td>
					<td width="30%">响应式布局</td>
				</tr>
				<tr>
					<th>宽屏LCD</th>
					<td>页面适配1920 x 1080</td>
					<td rowspan="6" style="vertical-align: middle;color: green;">一套应用了@media query技术的CSS适配所有屏幕</td>
				</tr>
				<tr>
					<th>iphone5</th>
					<td>页面适配1136 x 640视网膜屏幕</td>
				</tr>
				<tr>
					<th>iphone6</th>
					<td>页面适配1334 x 7500视网膜屏幕</td>
				</tr>
				<tr>
					<th>iphone6+</th>
					<td>页面适配1920 x 1080视网膜屏幕</td>
				</tr>
				<tr>
					<th>三星S6 Edge</th>
					<td>页面适配2560x1440 Quad HD屏幕</td>
				</tr>
				<tr>
					<th>更先进的手机</th>
					<td>无尽的页面适配</td>
				</tr>
				</tbody></table>
		</div>
		<div class="step slide">
                <h2>年会小火箭-<span class="font-green">CSS3动画+自定义字体</span></h2>
		<a id="reloadRocketFrame" style="cursor: pointer">刷新</a>
            <iframe style="width: 100%;height: 85%;" id="rocketFrame" src="http://cloud.eggcanfly.net:3000/counter.html"></iframe>
	    </div>
	    <div class="step slide">
	        <h2>图表应用<span class="font-green">画图+3D效果</span></h2>
		 <a id="to2D" style="cursor: pointer" class="chart" data-href="http://echarts.baidu.com/doc/example/map15.html">2D</a>
		 <a id="to3D" style="cursor: pointer" class="chart" data-href="http://echarts.baidu.com/x/doc/example/map3d_population3.html">3D</a>
		<iframe  style="width: 100%;height: 85%;" id="chartFrame" src="http://echarts.baidu.com/doc/example/map15.html"></iframe>
	    </div>
		<div class="step slide zhongli">
			<h2>重力感应- <span class="font-green">年会摇一摇拜年</span></h2>
			<iframe src="http://hd.3g.qq.com/g/bainian/index.html" class="demo-frame" frameborder="0" scrolling="no"></iframe>
			<div style="float:right;width: 50%;">可以获取手机所处的角度、方位和朝向。<br /><br /><br />
				<div class="binbintitle">应用场景：手机浏览器</div>
				<div class="binbintitle">支持情况：良好，主流的手机都支持</div>
				<div class="binbintitle">这个案例的开发时间：1天</div></div>
		</div>
		<div class="step slide">
			<h2>打飞机双人版</h2>
			<iframe src="http://philgong.kf0309.3g.qq.com/g/imgclean/dafeiji/index.jsp" class="demo-frame" frameborder="0" scrolling="no"></iframe>
			<div style="float:right;width: 55%;">
				<div class="fs22">两个物体之间碰撞检测</div>
				<table class="tb-list feijitable">
					<tbody><tr>
						<td width="70"></td>
						<td>不规则图形</td>
						<td>浏览器支持情况</td>
					</tr>
					<tr>
						<th>canvas</th>
						<td>支持</td>
						<td><span class="tableSpan">pc：ie678以外的浏览器都支持<br />手机：基本都支持</span></td>
					</tr>
					<tr>
						<th>div</th>
						<td>只支持矩形</td>
						<td>所有浏览器均支持</td>
					</tr>
					</tbody></table>

				<img class="gzhewm" style="display: block;width: 100%;" src="css/images/pengzhuang.png" />　　

			</div>
		</div>
		<div class="step slide">
			<h2>刮刮卡<span class="font-green">画布 + 图像处理</span></h2>
			<iframe src="http://www.liveapp.cn/auto/index/39049?channel=1&weixin.qq.com=#wechat_webview_type=1" class="demo-frame" frameborder="0" scrolling="no"></iframe>
			<div style="float:right;width: 50%;">检测用户手指触摸屏幕图像位置的像素透明度设成0<br /><br /><br />
				<div class="binbintitle">支持情况：几乎全部手机都支持</div>
				<div class="binbintitle">这个案例的开发时间：1天</div></div>
		</div>
		<div class="step slide chat chat-1">
			<h2>WebSocket 实例</h2>
		</div>
		<div class="step slide chat chat-1">
			<h2>WebSocket 实例</h2>
			<iframe src="http://chat.tangchanglin.com/chat.php" width="350" height="550" ></iframe>
			<div class="content-right">
				<h3 >聊天室，基于WebSocket进行实时通信的经典应用场景</h3>
				<p >目前已经实现以下功能：</p>
				<ul>
					<li>文字消息</li>
					<li>表情符号</li>
					<li>语音消息</li>
					<li>图片消息</li>
					<li>地理位置</li>
					<li>浏览器全屏</li>
					<li>.........</li>
				</ul>
				<p class="dd">最佳体验环境：Android + Firefox(或Chrome)</p>
				<p >
					<a href="javascript:;" ref="css/images/chat-qr-firefox.png" target="_blank"><img alt="" src="css/images/chat-qr-firefox.png" ></a>
					<a href="javascript:;" ref="css/images/chat-qr-chrome.png" target="_blank"><img alt="" src="css/images/chat-qr-chrome.png" ></a>
					<a href="javascript:;" ref="css/images/chat-qr-room.png" target="_blank"><img alt="" src="css/images/chat-qr-room.png" ></a>
					<br/>http://chat.tangchanglin.com/chat.php
				</p>
			</div>
			<div id="qr-layer" >

			</div>
			<div id="qr-wrap" ><img alt="" src="css/images/chat-qr-firefox.png" ></div>
		</div>
		<div class="step slide chat chat-2">
			<h2>WebSocket应用场景</h2>
			<div class="content">
				<p >我们可以用来干什么？</p>
				<ul >
					<li>
						多媒体聊天：聊天室、在线客服
						<p><img alt="" src="css/images/chat-screen-voice.png" ><img alt="" src="css/images/tom-chat2-01.png" /></p>
					</li>
					<li>
						在线游戏：双人打飞机、棋牌类游戏
						<p><img alt="" src="css/images/tom-chat2-02.png" /></p>
					</li>
					<li>
						数据实时监控：反观镜全景视图、股票基金 
						<p><img alt="" src="css/images/tom-chat2-03.png" /></p>
					</li>
					<li>
						多屏互动：活动推广（<a href="http://zt.qq.com/act/hdz/index.htm" target="_blank">《斗战诛天》）</a>
						<p><img alt="" src="css/images/tom-chat2-04.png" /></p>
					</li>
					<li>
						.......
						<p></p>
					</li>
				</ul>
				<p class="imgList"><img alt="" src="css/images/chat-screen-voice.png" ><img alt="" src="css/images/tom-chat2-02.png" /><img alt="" src="css/images/tom-chat2-03.png" /></p>
			</div>
		</div>
		<div class="step slide chat chat-3">
			<h2>WebSocket优势和缺点？</h2>
			<div class="content">
				<p >WebSocket 出现之前，我们通过 轮询/长连接/Flash 来实现 </p>
				<p style="color: green;font-weight: bold;">优点</p>
				<ul >
					<li>
						轻量：带宽消耗非常低<img id="chat-3-chart" alt="" src="css/images/tom-chat3-01.jpg" >
					</li>
					<li>
						实时：TCP连接，双向通信
					</li>
					<li>
						Push能力：由服务端主动推送数据到客户端
					</li>
					<li>
						无依赖：不需要安装Flash等插件
					</li>
					<li>
						Mobile Ready：移动端绝大部分浏览器支持
					</li>
				</ul>
				<p style="color: red;font-weight: bold;">不足</p>
				<ul >
					<li>
						PC上需要现代浏览器支持：Chrome、Firefox、IE10+
						<p><img alt="" src="css/images/tom-chat3-01.jpg" ></p>
					</li>
					<li>
						属于新协议：服务端需升级
					</li>
				</ul>
			</div>
			<div id="qr-layer" >

			</div>
			<div id="qr-wrap" ><img alt="" src="" ></div>
		</div>
	    <div class="step slide">
	        <h2>H5能力扩展 - 微信JS-SDK</h2>
	        <h3>1、分享接口</h3>
	        <h3>2、图像接口</h3>
	        <h3>3、音频接口</h3>
	        <h3>4、智能接口</h3>
	        <h3>5、设备信息</h3>
	        <h3>6、地理位置</h3>
	        <h3>7、界面操作</h3>
	        <h3>8、微信扫一扫</h3>
	        <h3>9、微信小店</h3>
	        <h3>10、微信卡券</h3>
	        <h3>11、微信支付</h3>
	        <img src="css/images/2015.jpg" alt="" class="wx-img">
	    </div>
		<div class="step slide">
			<h2>H5能力扩展 - 微信JS-SDK</h2>
			<img src="css/images/bjx.png" style="width:40%;margin-right: 10%;" alt="" class="">
		</div>
		<div class="step slide">
			<h2>H5能力扩展 - 微信JS-SDK</h2>
			<img src="css/images/IMG_0012.jpg" style="width:80%;margin-right: 10%;" alt="" class="">
		</div>
		<div class="step slide">
			<h2>H5能力扩展 - 微信JS-SDK</h2>
			<img src="css/images/taxi.png" style="width:40%;margin-right: 10%;" alt="" class="">
			<img src="css/images/qb.png" style="width:40%" alt="" class="">
		</div>
	    <div class="step slide">
	        <h2>H5给设计师带来的改变</h2>
	        <div class="center">
		        <img src="css/images/media.jpg" alt="">
				<iframe style="width: 100%;height: 55%;" src="http://ianlunn.github.io/Hover/"></iframe>
			</div>
		</div>
	    <div class="step slide">
	        <h2>未来</h2>
	        <div class="center">
	        	<img src="css/images/html5-native1.jpg" alt="">
	        	<i></i>
	        </div>
	    </div>
	</div>
	<script src="js/jquery.js"></script>
	<script src="js/impress.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script src="/js/index.js"></script>
	<script>
		var page = $('#impress').children('.slide');
		var firstX = -1000;
		page.each(function(i,n){
			$(n).attr({
				'data-x': firstX + i * 1000,
				'data-y': '-1500'
			});;
		})
		impress().init();

		$('#reloadRocketFrame').click(function(){
			$('#rocketFrame').attr('src', $('#rocketFrame').attr('src'));
		});
		$('.chart').click(function(){
			$('#chartFrame').attr('src', $(this).data('href'));
		});

		$('.chat-1 .content-right a').click(function(){
			$('.chat-1 #qr-wrap img').attr('src',$(this).attr("ref"));
			$('.chat-1 #qr-wrap').fadeIn();
			$('.chat-1 #qr-layer').fadeIn();
		})
		$('.chat-1 #qr-layer').click(function(){
			$('.chat-1 #qr-wrap').fadeOut();
			$(this).fadeOut();
		});
		
		$('.chat-2 li').click(function(){
			if($(this).find("p").is(":visible")){
				$(this).find("p").hide();
				$('.chat-2 li').fadeIn();
				$('.chat-2 .imgList').show();
			}else{
				$('.chat-2 li').hide();
				$('.chat-2 .imgList').hide();
				$(this).fadeIn();
				$(this).find("p").fadeIn();
			}
			
		});
		
		$("#chat-3-chart").click(function(){
			$('.chat-3 #qr-wrap img').attr('src',$(this).attr("src"));
			$('.chat-3 #qr-wrap').fadeIn();
			$('.chat-3 #qr-layer').fadeIn();
		})
		$('.chat-3 #qr-layer').click(function(){
			$('.chat-3 #qr-wrap').fadeOut();
			$(this).fadeOut();
		});

		var hashQrPage = {
			'5': '/images/qr.png',
			'8' : 	'css/images/rocket.png',
			'10':'css/images/nianhui.png',
			'11' : 'css/images/feiji.png',
			'12' : 'css/images/guagua.png',
			'13' : 'css/images/chat-qr-room.png'

		};
		var btn = $('.qr-btn');
		$(window).on('hashchange',function(e){
			var page = location.hash.split('-')[1];
			if(hashQrPage[page]){
				btn.find('img').attr('src',hashQrPage[page]);
				btn.fadeIn();
			}else{
				if(btn.is('.open-qr')){
					hideQr();
				}
				btn.fadeOut();
			}
		});

		btn.on('click',function(){
			if(btn.is('.open-qr')){
				hideQr();
			}else{
				showQr();
			}
		});

		function showQr(){
			var page = location.hash.split('-')[1];
			var w = $(window),
					ww = w.width(),
					wh = w.height(),
					bw = 520,
					bh = 520;
			if(hashQrPage[page]){
				btn.addClass('open-qr');
				btn.css({
					left: (ww - bw) / 2,
					top: (wh - bh) / 2
				});
			}
		}

		function hideQr(){
			btn.removeClass('open-qr').removeAttr('style').css({
				display: 'block'
			});
		}

		var socket = io();
		//events
		socket.on('showQr',function(data){
			showQr();
		});

		socket.on('hideQr',function(data){
			hideQr();
		});

		socket.on('slide control',function(data){

			impress()[data.cmd].call()
			impress()[data.cmd].call();
		});
	</script>
</body>
</html>